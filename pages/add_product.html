<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Product - ShopEasy</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: radial-gradient(circle, #101524, #05070f);
            color: white;
        }

        .admin-box {
            width: 500px;
            background: rgba(25, 25, 45, 0.92);
            padding: 35px;
            margin-top: 60px;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(0, 238, 255, 0.4);
        }

        .admin-box h3 {
            color: #00eaff;
            font-weight: bold;
        }

        .form-control {
            background-color: transparent;
            border: none;
            border-bottom: 2px solid #00eaff;
            border-radius: 0;
            color: white;
        }
        .form-control:focus {
            box-shadow: none;
            border-bottom: 2px solid #6a00ff;
        }

        .btn-add {
            background: linear-gradient(90deg, #4e00c9, #00eaff);
            border: none;
            font-weight: bold;
            color: #fff;
        }
        .btn-add:hover {
            opacity: .85;
        }

        #previewImg {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 10px;
            display: none;
            margin-bottom: 15px;
            border: 2px solid #00eaff;
        }

        a {
            color: #00eaff;
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-dark bg-dark px-3">
    <a class="navbar-brand fw-bold" href="../index.html">ShopEasy</a>
    <a href="#" id="logoutBtn" class="text-light">Logout</a>
</nav>

<div class="d-flex justify-content-center">
    <div class="admin-box shadow">

        <h3 class="text-center mb-4">Add New Product</h3>

        <img id="previewImg" alt="Preview">

        <form id="addProductForm">

            <input type="text" id="productName" class="form-control mb-3"
                placeholder="Product Name" required>

            <input type="number" id="price" class="form-control mb-3"
                placeholder="Price (â‚¹)" required>

            <textarea id="description" class="form-control mb-3"
                placeholder="Description" rows="2" required></textarea>

            <input type="file" id="imageFile" class="form-control mb-3"
                accept="image/*" required>

            <button class="btn-add w-100 py-2 mt-2" type="submit">
                + Add Product
            </button>

        </form>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


<script>
// Admin protection
let user = JSON.parse(localStorage.getItem("loggedInUser"));
if (!user || user.email !== "admin@gmail.com") {
    alert("Access Denied! Admin Only.");
    window.location.href = "login.html";
}

// Logout
document.getElementById("logoutBtn").onclick = () => {
    localStorage.removeItem("loggedInUser");
    window.location.href = "login.html";
};

// Image Preview
document.getElementById("imageFile").addEventListener("change", function(){
    let file = this.files[0];
    if(file){
        let preview = document.getElementById("previewImg");
        preview.style.display = "block";
        preview.src = URL.createObjectURL(file);
    }
});

// Add product logic
document.getElementById("addProductForm").addEventListener("submit", function(e){
    e.preventDefault();

    let name = document.getElementById("productName").value.trim();
    let price = parseFloat(document.getElementById("price").value);
    let description = document.getElementById("description").value.trim();
    let imageFile = document.getElementById("imageFile").files[0];

    if (!name || !price || !description || !imageFile) {
        alert("Fill all fields properly!");
        return;
    }

    let imageURL = URL.createObjectURL(imageFile);

    let products = JSON.parse(localStorage.getItem("products")) || [];

    products.push({
        id: Date.now(),
        name,
        price,
        description,
        image: imageURL
    });

    localStorage.setItem("products", JSON.stringify(products));

    alert("Product added successfully!");
    window.location.href = "products.html";
});
</script>

</body>
</html>

